from fastapi.testclient import TestClient
from app.main import app

def test_api_predict():
    landmark_sample = [0.5064623951911926,0.7944118976593018,-1.3511005363397999e-06,0.381645530462265,0.6377809047698975,-0.04274412989616394,0.31724247336387634,0.45819520950317383,-0.07626412808895111,0.38043880462646484,0.314677894115448,-0.12239771336317062,0.5148817300796509,0.2892794609069824,-0.15769441425800323,0.4160836637020111,0.358544260263443,0.030487818643450737,0.39959120750427246,0.22051703929901123,-0.0456305630505085,0.3750855326652527,0.3149436414241791,-0.08880093693733215,0.39062732458114624,0.3815891742706299,-0.10651613771915436,0.5130043625831604,0.3679221570491791,0.017300736159086227,0.5022477507591248,0.2256140112876892,-0.06264572590589523,0.4728601574897766,0.3419743478298187,-0.08094210177659988,0.48631083965301514,0.4120239317417145,-0.07327618449926376,0.6064085960388184,0.3924877643585205,-0.013378946110606194,0.6017383933067322,0.23745128512382507,-0.09141543507575989,0.5563176274299622,0.3558151125907898,-0.07708244025707245,0.5560973882675171,0.4455908536911011,-0.04431851953268051,0.7002667188644409,0.4325335621833801,-0.050316568464040756,0.681291401386261,0.28633803129196167,-0.08840493112802505,0.6561615467071533,0.33608677983283997,-0.07340194284915924,0.6608584523200989,0.3995974361896515,-0.05026829615235329]
    client = TestClient(app)
    response = client.post("/predict_landmarks", json={"landmarks":landmark_sample})

    assert response.status_code == 200
    assert "class" in response.json()